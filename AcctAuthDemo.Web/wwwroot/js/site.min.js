var px={cookie:{set:function(n,t,i){i||(i=30);var r=new Date;r.setTime(r.getTime()+i*864e5);document.cookie=n+"="+escape(t)+";expires="+r.toGMTString()+";path=/"},get:function(n){var t,i=new RegExp("(^| )"+n+"=([^;]*)(;|$)");return(t=document.cookie.match(i))?unescape(t[2]):null},del:function(n){var t=new Date,i;t.setTime(t.getTime()-1);i=getCookie(n);i!=null&&(document.cookie=n+"="+i+";expires="+t.toGMTString())}},device:{cookieName:"deviceId",getBrowserInfo:function(){var n={appname:"unknown",version:0},t=window.navigator.userAgent.toLowerCase();return/(msie|firefox|opera|chrome|netscape)\D+(\d[\d.]*)/.test(t)?(n.appname=RegExp.$1,n.version=RegExp.$2):/version\D+(\d[\d.]*).*safari/.test(t)&&(n.appname="safari",n.version=RegExp.$2),n},getDeviceInfo:function(){var t=px.device.fit(),n=px.device.getBrowserInfo();return{id:t,name:n.appname+" "+n.version}},fit:function(){var n=px.cookie.get(px.device.cookieName);return n||(n=px.util.newGuid(),px.cookie.set(px.device.cookieName,n)),n}},util:{newGuid:function(n){for(var r,i="",t=1;t<=32;t++)r=Math.floor(Math.random()*16).toString(16),i+=r,n||t!=8&&t!=12&&t!=16&&t!=20||(i+="-");return i},date:{toString:function(n,t){var r={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),f:t.getMilliseconds()},i;/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(i in r)new RegExp("("+i+")").test(n)&&(n=n.replace(RegExp.$1,RegExp.$1.length==1?r[i]:("00"+r[i]).substr((""+r[i]).length)));return n}}},ajax:{interceptor:function(n,t){if(n.ErrCode===4){location.href="/User/Login";throw n.ErrMsg;}if(n.ErrCode){alert(n.ErrMsg);t&&t(n);throw new Error(n.ErrMsg);}}},commonTable:{trClick:function(){$("table.common tbody tr").click(function(){$("table.common tr").removeClass("current");$(this).addClass("current")})},hoverTitle:function(n){var t=[],i;$.each(n,function(n,i){t.push("table.common td."+i)});i=t.join();$(i).hover(function(){$(this).attr("title",$(this).text())},function(){$(this).attr("title",null)})}},time:{expendStartEndTime:function(n){$(n).click(function(){var n=$(this).parent(),t,i;n.has("ul.dropdown-menu").length||(t=$(this).attr("id"),i=$(this).text(),n.append('<ul class="dropdown-menu" aria-labelledby="'+t+'" data-time="'+i+'">    <li><a class="pointer" onclick="px.time.setStartEndTime(this, 0, 1)">查询1秒内<\/a><\/li>    <li><a class="pointer" onclick="px.time.setStartEndTime(this, 1, 1)">查询前后1秒<\/a><\/li>    <li><a class="pointer" onclick="px.time.setStartEndTime(this, 2, 2)">查询前后2秒<\/a><\/li>    <li><a class="pointer" onclick="px.time.setStartEndTime(this, 10, 10)">查询前后10秒<\/a><\/li>    <li><a class="pointer" onclick="px.time.setStartEndTime(this, 30, 30)">查询前后30秒<\/a><\/li>    <li><a class="pointer" onclick="px.time.setStartEndTime(this, 60, 60)">查询前后1分钟<\/a><\/li>    <li><a class="pointer" onclick="px.time.setStartEndTime(this, 120, 120)">查询前后2分钟<\/a><\/li>    <li><a class="pointer" onclick="px.time.setStartEndTime(this, 240, 240)">查询前后4分钟<\/a><\/li>    <li><a class="pointer" onclick="px.time.setStartEndTime(this, 480, 480)">查询前后8分钟<\/a><\/li><\/ul>'))})},setStartEndTime:function(n,t,i,r,u){var f=new Date($(n).parents("ul.dropdown-menu").data("time")).getTime(),e=f-t*1e3,o=f+i*1e3;r=r==undefined?"#startTime":r;u=u==undefined?"#endTime":u;$(r).val(px.util.date.toString("yyyy-MM-dd hh:mm:ss.f",new Date(e))).change();$(u).val(px.util.date.toString("yyyy-MM-dd hh:mm:ss.f",new Date(o))).change()},timePlus:function(){$(".px-time-plus").click(function(){var t=$(this).data("plus-id"),i=$(this).data("plus-sec"),r=$("#"+t).val(),n=new Date(r);n=="Invalid Date"&&(n=new Date);n=new Date(n.getTime()+i*1e3);$("#"+t).val(px.util.date.toString("yyyy-MM-dd hh:mm:ss.f",n)).change()})}}};$(function(){px.time.timePlus()});